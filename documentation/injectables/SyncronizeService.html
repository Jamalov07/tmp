<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>tmp documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>
          <script>
              // --- Iframe navigation tracking for Template Playground ---
              function sendCurrentUrlToParent() {
                  if (window.parent && window.parent !== window) {
                      window.parent.postMessage({
                          type: 'compodoc-iframe-navigate',
                          url: window.location.pathname + window.location.hash
                      }, '*');
                  }
              }
              window.addEventListener('hashchange', sendCurrentUrlToParent, false);
              window.addEventListener('popstate', sendCurrentUrlToParent, false);
              window.addEventListener('DOMContentLoaded', sendCurrentUrlToParent, false);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">tmp documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">












<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >SyncronizeService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/syncronize/syncronize.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#accessToken" >accessToken</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#baseUrl" >baseUrl</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#password" >password</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#phone" >phone</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#arrival" >arrival</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#client" >client</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#clientPayment" >clientPayment</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#fetchAllPages" >fetchAllPages</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findAllClients" >findAllClients</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findAllProducts" >findAllProducts</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findAllStaffs" >findAllStaffs</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#findAllSuppliers" >findAllSuppliers</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getHeaders" >getHeaders</a>
                            </li>
                            <li>
                                <a href="#onModuleInit" >onModuleInit</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#product" >product</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#returning" >returning</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#selling" >selling</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#signIn" >signIn</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#staff" >staff</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#staffPayment" >staffPayment</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#supplier" >supplier</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#supplierPayment" >supplierPayment</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#syncronize" >syncronize</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#syncronizeAll" >syncronizeAll</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(syncronizeRepository: <a href="../injectables/SyncronizeRepository.html" target="_self">SyncronizeRepository</a>, prisma: <a href="../injectables/PrismaService.html" target="_self">PrismaService</a>, configService: ConfigService)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/modules/syncronize/syncronize.service.ts:15</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>syncronizeRepository</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/SyncronizeRepository.html" target="_self" >SyncronizeRepository</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>prisma</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PrismaService.html" target="_self" >PrismaService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>configService</td>
                                                  
                                                        <td>
                                                                    <code>ConfigService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="arrival"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>arrival</b></span>
                        <a href="#arrival"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>arrival()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="520"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:520</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="client"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>client</b></span>
                        <a href="#client"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>client()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="106"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:106</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clientPayment"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>clientPayment</b></span>
                        <a href="#clientPayment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clientPayment()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="300"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:300</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchAllPages"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>fetchAllPages</b></span>
                        <a href="#fetchAllPages"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchAllPages(endpoint: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="46"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:46</a></div>
                        </td>
                    </tr>

                    <tr>
                        <td class="col-md-4">
                            <b>Type parameters :</b>
                            <ul class="type-parameters">
                                    <li>T</li>
                            </ul>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>endpoint</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;T[]&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAllClients"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findAllClients</b></span>
                        <a href="#findAllClients"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAllClients()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="800"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:800</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAllProducts"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findAllProducts</b></span>
                        <a href="#findAllProducts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAllProducts()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="804"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:804</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAllStaffs"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findAllStaffs</b></span>
                        <a href="#findAllStaffs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAllStaffs()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="792"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:792</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="findAllSuppliers"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>findAllSuppliers</b></span>
                        <a href="#findAllSuppliers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>findAllSuppliers()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="796"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:796</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getHeaders"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>getHeaders</b></span>
                        <a href="#getHeaders"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getHeaders()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="39"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:39</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>{ &#x27;Content-Type&#x27;: string; Authorization: string; }</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onModuleInit"></a>
                    <span class="name">
                        <span ><b>onModuleInit</b></span>
                        <a href="#onModuleInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onModuleInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="23"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:23</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="product"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>product</b></span>
                        <a href="#product"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>product()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="125"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:125</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="returning"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>returning</b></span>
                        <a href="#returning"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>returning()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="651"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:651</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selling"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>selling</b></span>
                        <a href="#selling"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>selling()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="397"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:397</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="signIn"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                        <span ><b>signIn</b></span>
                        <a href="#signIn"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>signIn()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="29"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:29</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="staff"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>staff</b></span>
                        <a href="#staff"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>staff()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="70"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:70</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="staffPayment"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>staffPayment</b></span>
                        <a href="#staffPayment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>staffPayment()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="150"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:150</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="supplier"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>supplier</b></span>
                        <a href="#supplier"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>supplier()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="88"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:88</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="supplierPayment"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>supplierPayment</b></span>
                        <a href="#supplierPayment"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>supplierPayment()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="205"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:205</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="syncronize"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>syncronize</b></span>
                        <a href="#syncronize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>syncronize()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="787"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:787</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="syncronizeAll"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>syncronizeAll</b></span>
                        <a href="#syncronizeAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>syncronizeAll()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="761"
                                    class="link-to-prism">src/modules/syncronize/syncronize.service.ts:761</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                        <div class="io-description">
                            <b>Returns : </b>    <code>unknown</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="accessToken"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>accessToken</b></span>
                        <a href="#accessToken"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/modules/syncronize/syncronize.service.ts:15</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="baseUrl"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>baseUrl</b></span>
                        <a href="#baseUrl"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="12" class="link-to-prism">src/modules/syncronize/syncronize.service.ts:12</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="password"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>password</b></span>
                        <a href="#password"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/modules/syncronize/syncronize.service.ts:14</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="phone"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>phone</b></span>
                        <a href="#phone"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="13" class="link-to-prism">src/modules/syncronize/syncronize.service.ts:13</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, OnModuleInit } from &#x27;@nestjs/common&#x27;
import { SyncronizeRepository } from &#x27;./syncronize.repository&#x27;
import axios from &#x27;axios&#x27;
import { PrismaService } from &#x27;../shared&#x27;
import { SellingStatusEnum, ServiceTypeEnum, UserTypeEnum } from &#x27;@prisma/client&#x27;
import { createResponse } from &#x27;../../common&#x27;
import { ConfigService } from &#x27;@nestjs/config&#x27;
import * as bcrypt from &#x27;bcryptjs&#x27;

@Injectable()
export class SyncronizeService implements OnModuleInit {
	private baseUrl: string
	private phone: string
	private password: string
	private accessToken &#x3D; &#x27;&#x27;

	constructor(
		private readonly syncronizeRepository: SyncronizeRepository,
		private readonly prisma: PrismaService,
		private readonly configService: ConfigService,
	) {}

	onModuleInit() {
		this.baseUrl &#x3D; this.configService.getOrThrow(&#x27;old-service.baseUrl&#x27;)
		this.phone &#x3D; this.configService.getOrThrow(&#x27;old-service.user&#x27;)
		this.password &#x3D; this.configService.getOrThrow(&#x27;old-service.password&#x27;)
	}

	private async signIn() {
		const url &#x3D; &#x60;${this.baseUrl}/admin/sign-in&#x60;
		const response &#x3D; await axios.post(
			url,
			{ phone: this.phone, password: this.password },
			{ headers: { &#x27;Content-Type&#x27;: &#x27;application/json&#x27; }, timeout: 5000, maxRedirects: 1, proxy: false },
		)
		this.accessToken &#x3D; response.data.accessToken
	}

	private getHeaders() {
		return {
			&#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
			Authorization: &#x60;Bearer ${this.accessToken}&#x60;,
		}
	}

	private async fetchAllPages&lt;T&gt;(endpoint: string): Promise&lt;T[]&gt; {
		const allData: T[] &#x3D; []
		const firstPageUrl &#x3D; &#x60;${this.baseUrl}${endpoint}?pageSize&#x3D;100&amp;pageNumber&#x3D;1&#x60;
		const firstPage &#x3D; await axios.get(firstPageUrl, {
			headers: this.getHeaders(),
			timeout: 5000,
			maxRedirects: 1,
			proxy: false,
		})

		for (let i &#x3D; 1; i &lt;&#x3D; firstPage.data.pageCount; i++) {
			const url &#x3D; &#x60;${this.baseUrl}${endpoint}?pageSize&#x3D;100&amp;pageNumber&#x3D;${i}&#x60;
			const res &#x3D; await axios.get(url, {
				headers: this.getHeaders(),
				timeout: 5000,
				maxRedirects: 1,
				proxy: false,
			})
			allData.push(...res.data.data)
		}

		return allData
	}

	async staff() {
		await this.prisma.userModel.deleteMany({ where: { type: UserTypeEnum.staff } })
		const staffData &#x3D; await this.fetchAllPages&lt;{ name: string; phone: string; createdAt: Date }&gt;(&#x27;/admin&#x27;)
		const staffs &#x3D; await this.prisma.userModel.createMany({
			skipDuplicates: false,
			data: staffData.map((s) &#x3D;&gt; ({
				fullname: s.name.trim(),
				phone: s.phone.trim(),
				createdAt: s.createdAt,

				type: UserTypeEnum.staff,
				password: bcrypt.hashSync(s.phone.trim(), 7),
			})),
		})
		console.log(&#x27;staffs&#x27;, staffData.length, staffs.count)
		return staffs
	}

	async supplier() {
		await this.prisma.userModel.deleteMany({ where: { type: UserTypeEnum.supplier } })
		const data &#x3D; await this.fetchAllPages&lt;{ name: string; phone: string; createdAt: Date }&gt;(&#x27;/user/supplier&#x27;)
		const suppliers &#x3D; await this.prisma.userModel.createMany({
			skipDuplicates: false,
			data: data.map((s) &#x3D;&gt; ({
				fullname: s.name.trim(),
				phone: s.phone.trim(),
				createdAt: s.createdAt,

				type: UserTypeEnum.supplier,
				password: bcrypt.hashSync(s.phone.trim(), 7),
			})),
		})
		console.log(&#x27;suppliers&#x27;, data.length, suppliers.count)
		return suppliers
	}

	async client() {
		await this.prisma.userModel.deleteMany({ where: { type: UserTypeEnum.client } })
		const data &#x3D; await this.fetchAllPages&lt;{ name: string; phone: string; createdAt: Date }&gt;(&#x27;/user/client&#x27;)

		const clients &#x3D; await this.prisma.userModel.createMany({
			skipDuplicates: false,
			data: data.map((c) &#x3D;&gt; ({
				fullname: c.name.trim(),
				phone: c.phone.trim(),
				createdAt: c.createdAt,

				type: UserTypeEnum.client,
				password: bcrypt.hashSync(c.phone.trim(), 7),
			})),
		})
		console.log(&#x27;clients&#x27;, data.length, clients.count)
		return clients
	}

	async product() {
		await this.prisma.productModel.deleteMany({})
		const data &#x3D; await this.fetchAllPages&lt;{
			name: string
			cost: number
			count: number
			min_amount: number
			selling_price: number
			createdAt: Date
		}&gt;(&#x27;/product&#x27;)
		const products &#x3D; await this.prisma.productModel.createMany({
			skipDuplicates: false,
			data: data.map((p) &#x3D;&gt; ({
				name: p.name.trim(),
				cost: p.cost,
				count: p.count,
				price: p.selling_price,
				minAmount: p.min_amount,
				createdAt: p.createdAt,
			})),
		})
		console.log(&#x27;products&#x27;, data.length, products.count)
		return products
	}

	async staffPayment() {
		await this.prisma.paymentModel.deleteMany({ where: { type: ServiceTypeEnum.staff } })

		const staffs &#x3D; await this.findAllStaffs()
		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			sum: number
			description: string
			employee: { name: string; phone: string }
			createdAt: Date
		}&gt;(&#x27;/employeePayment&#x27;)

		const pays &#x3D; []
		const staffBalance: Record&lt;string, number&gt; &#x3D; {}
		for (const pay of data) {
			const key &#x3D; &#x60;${pay.employee?.name.trim()}-${pay.employee?.phone.trim()}&#x60;
			const staff &#x3D; staffObject[key] ? staffObject[key] : { id: null }
			if (!staff) {
				continue
			} else {
				pays.push({
					type: ServiceTypeEnum.staff,
					userId: staff.id,
					staffId: staff.id,
					total: pay.sum,
					sum: pay.sum,
					description: pay.description,
					createdAt: pay.createdAt,
				})
				staffBalance[staff.id] &#x3D; (staffBalance[staff.id] ?? 0) + pay.sum
			}
		}

		const payments &#x3D; await this.prisma.paymentModel.createMany({
			skipDuplicates: false,
			data: pays,
		})

		await Promise.all(
			Object.entries(staffBalance).map(([userId, sum]) &#x3D;&gt;
				this.prisma.userModel.update({
					where: { id: userId },
					data: { balance: { increment: sum } },
				}),
			),
		)

		console.log(&#x27;staff payments&#x27;, data.length, payments.count)
		return payments
	}

	async supplierPayment() {
		await this.prisma.paymentModel.deleteMany({ where: { type: ServiceTypeEnum.supplier } })

		const staffs &#x3D; await this.findAllStaffs()
		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const suppliers &#x3D; await this.findAllSuppliers()
		const supplierObject: { [key: string]: { id: string } } &#x3D; {}
		for (const sp of suppliers) {
			supplierObject[&#x60;${sp.fullname}-${sp.phone}&#x60;] &#x3D; sp
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			card: number
			cash: number
			other: number
			transfer: number
			description: string
			order?: { id: string }
			supplier: { name: string; phone: string }
			createdAt: Date
		}&gt;(&#x27;/incomingOrderPayment&#x27;)

		const pays &#x3D; []
		const orpays &#x3D; []
		const supplierBalance: Record&lt;string, number&gt; &#x3D; {}
		for (const pay of data) {
			const staff &#x3D; { id: staffs[0].id }
			const key &#x3D; &#x60;${pay.supplier.name.trim()}-${pay.supplier.phone.trim()}&#x60;
			let supplier &#x3D; supplierObject[key] ? supplierObject[key] : { id: null }
			if (!supplier.id) {
				supplier &#x3D; await this.prisma.userModel.findFirst({
					where: {
						type: UserTypeEnum.supplier,
						phone: pay.supplier.phone.trim(),
						fullname: pay.supplier.name.trim(),
					},
				})
				if (!supplier) {
					supplier &#x3D; await this.prisma.userModel.create({
						data: {
							type: UserTypeEnum.supplier,
							phone: pay.supplier.phone.trim(),
							fullname: pay.supplier.name.trim(),
							password: pay.supplier.phone.trim(),
						},
					})
				}
			}
			if (!pay.order) {
				const decimalZero &#x3D; 0

				const totalPayment &#x3D; (pay.card ?? decimalZero) + (pay.cash ?? decimalZero) + (pay.other ?? decimalZero) + (pay.transfer ?? decimalZero)
				pays.push({
					total: totalPayment,
					type: ServiceTypeEnum.supplier,
					userId: supplier.id,
					staffId: staff.id,
					cash: pay.cash,
					card: pay.card,
					other: pay.other,
					transfer: pay.transfer,
					description: pay.description,
					createdAt: pay.createdAt,
				})

				supplierBalance[staff.id] &#x3D; (supplierBalance[staff.id] ?? 0) + totalPayment
			} else {
				orpays.push(pay)
			}
		}

		const payments &#x3D; await this.prisma.paymentModel.createMany({
			skipDuplicates: false,
			data: pays,
		})

		await Promise.all(
			Object.entries(supplierBalance).map(([userId, sum]) &#x3D;&gt;
				this.prisma.userModel.update({
					where: { id: userId },
					data: { balance: { increment: sum } },
				}),
			),
		)

		console.log(orpays.length)
		console.log(&#x27;supplier payment&#x27;, data.length, payments.count)

		return payments
	}

	async clientPayment() {
		await this.prisma.paymentModel.deleteMany({ where: { type: ServiceTypeEnum.client } })

		const staffs &#x3D; await this.findAllStaffs()
		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const clients &#x3D; await this.findAllClients()
		const clientObject: { [key: string]: { id: string } } &#x3D; {}
		for (const sp of clients) {
			clientObject[&#x60;${sp.fullname}-${sp.phone}&#x60;] &#x3D; sp
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			card: number
			cash: number
			other: number
			transfer: number
			description: string
			order?: { id: string }
			client: { name: string; phone: string }
			seller: { name: string; phone: string }
			createdAt: Date
		}&gt;(&#x27;/payment&#x27;)

		const pays &#x3D; []
		const orpays &#x3D; []
		const clientBalance: Record&lt;string, number&gt; &#x3D; {}

		for (const pay of data) {
			const stkey &#x3D; &#x60;${pay.seller?.name.trim()}-${pay.seller?.phone.trim()}&#x60;
			const staff &#x3D; staffObject[stkey] ? staffObject[stkey] : { id: staffs[0].id }

			const clkey &#x3D; &#x60;${pay.client.name.trim()}-${pay.client.phone.trim()}&#x60;
			let client &#x3D; clientObject[clkey] ? clientObject[clkey] : { id: null }
			if (!client.id) {
				client &#x3D; await this.prisma.userModel.findFirst({
					where: {
						fullname: pay.client.name.trim(),
						phone: pay.client.phone.trim(),
						type: UserTypeEnum.client,
					},
				})
				if (!client) {
					client &#x3D; await this.prisma.userModel.create({
						data: {
							fullname: pay.client.name.trim(),
							phone: pay.client.phone.trim(),
							type: UserTypeEnum.client,
							password: pay.client.phone.trim(),
						},
					})
				}
			}
			if (!pay.order) {
				const decimalZero &#x3D; 0

				const totalPayment &#x3D; (pay.card ?? decimalZero) + (pay.cash ?? decimalZero) + (pay.other ?? decimalZero) + (pay.transfer ?? decimalZero)

				pays.push({
					total: totalPayment,
					type: ServiceTypeEnum.client,
					userId: client.id,
					staffId: staff.id,
					cash: pay.cash,
					card: pay.card,
					other: pay.other,
					transfer: pay.transfer,
					description: pay.description,
					createdAt: pay.createdAt,
				})
				clientBalance[staff.id] &#x3D; (clientBalance[staff.id] ?? 0) + totalPayment
			} else {
				orpays.push(pay)
			}
		}

		const payments &#x3D; await this.prisma.paymentModel.createMany({
			skipDuplicates: false,
			data: pays,
		})

		await Promise.all(
			Object.entries(clientBalance).map(([userId, sum]) &#x3D;&gt;
				this.prisma.userModel.update({
					where: { id: userId },
					data: { balance: { increment: sum } },
				}),
			),
		)

		console.log(orpays.length)
		console.log(&#x27;client payments&#x27;, data.length, payments.count)
	}

	async selling() {
		await this.prisma.sellingModel.deleteMany({})

		const staffs &#x3D; await this.findAllStaffs()

		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const clients &#x3D; await this.findAllClients()

		const clientObject: { [key: string]: { id: string } } &#x3D; {}
		for (const sp of clients) {
			clientObject[&#x60;${sp.fullname}-${sp.phone}&#x60;] &#x3D; sp
		}

		const products &#x3D; await this.findAllProducts()

		const productObject: { [key: string]: { id: string } } &#x3D; {}
		for (const pr of products) {
			productObject[pr.name] &#x3D; pr
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			articl: number
			sum: number
			client: { phone: string; name: string }
			seller: { phone: string; name: string }
			payment: { totalPay: number; card: number; cash: number; other: number; transfer: number; description: string; createdAt: Date }
			accepted: boolean
			createdAt: Date
			sellingDate: Date
			products: { cost: number; count: number; price: number; createdAt: Date; product: { name: string; count: number } }[]
		}&gt;(&#x27;/Order&#x27;)

		const sels &#x3D; []
		for (const selling of data) {
			const stkey &#x3D; &#x60;${selling.seller?.name.trim()}-${selling.seller?.phone.trim()}&#x60;
			const staff &#x3D; staffObject[stkey] ? staffObject[stkey] : { id: staffs[0].id }
			const clkey &#x3D; &#x60;${selling.client.name.trim()}-${selling.client.phone.trim()}&#x60;
			let client &#x3D; clientObject[clkey] ? clientObject[clkey] : { id: null }
			if (!client.id) {
				client &#x3D; await this.prisma.userModel.findFirst({
					where: {
						fullname: selling.client.name.trim(),
						phone: selling.client.phone.trim(),
						type: UserTypeEnum.client,
					},
				})
				if (!client) {
					client &#x3D; await this.prisma.userModel.create({
						data: {
							fullname: selling.client.name.trim(),
							phone: selling.client.phone.trim(),
							type: UserTypeEnum.client,
							password: selling.client.phone.trim(),
						},
					})
				}
			}
			const products: { price: number; count: number; totalPrice: number; createdAt: Date; productId: string }[] &#x3D; []
			for (const pro of selling.products) {
				const pkey &#x3D; pro.product.name.trim()
				let product &#x3D; productObject[pkey] ? productObject[pkey] : { id: null }
				if (!product.id) {
					product &#x3D; await this.prisma.productModel.findFirst({ where: { name: pkey } })
					if (!product) {
						product &#x3D; await this.prisma.productModel.create({ data: { name: pkey, count: pro.product.count ?? undefined } })
					}
				}
				const tprice &#x3D; pro.count * pro.price
				products.push({ count: pro.count, price: pro.price, totalPrice: tprice, createdAt: pro.createdAt, productId: product.id })
			}

			sels.push({
				status: selling.accepted ? SellingStatusEnum.accepted : SellingStatusEnum.notaccepted,
				clientId: client.id,
				date: selling.sellingDate,
				staffId: staff.id,
				totalPrice: selling.sum,
				payment: {
					create: {
						total: selling.payment?.totalPay,
						card: selling.payment?.card,
						cash: selling.payment?.cash,
						other: selling.payment?.other,
						transfer: selling.payment?.transfer,
						description: selling.payment?.description,
						createdAt: selling.payment?.createdAt,
						type: ServiceTypeEnum.selling,
						staffId: staff.id,
						userId: client.id,
					},
				},
				products: {
					createMany: {
						skipDuplicates: false,
						data: products.map((p) &#x3D;&gt; {
							return {
								productId: p.productId,
								type: ServiceTypeEnum.selling,
								totalPrice: p.totalPrice,
								count: p.count,
								price: p.price,
								staffId: staff.id,
								createdAt: p.createdAt,
							}
						}),
					},
				},
			})
		}
		const chunkSize &#x3D; 100
		const addedsellings &#x3D; []
		for (let i &#x3D; 0; i &lt; sels.length; i +&#x3D; chunkSize) {
			const chunk &#x3D; sels.slice(i, i + chunkSize)
			await Promise.all(chunk.map((sel) &#x3D;&gt; this.prisma.sellingModel.create({ data: sel }).then(() &#x3D;&gt; addedsellings.push(true))))
		}

		console.log(&#x27;sellings&#x27;, data.length, addedsellings.length)
	}

	async arrival() {
		await this.prisma.arrivalModel.deleteMany({})

		const staffs &#x3D; await this.findAllStaffs()

		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const suppliers &#x3D; await this.findAllSuppliers()

		const supplierObject: { [key: string]: { id: string } } &#x3D; {}
		for (const sp of suppliers) {
			supplierObject[&#x60;${sp.fullname}-${sp.phone}&#x60;] &#x3D; sp
		}

		const products &#x3D; await this.findAllProducts()

		const productObject: { [key: string]: { id: string } } &#x3D; {}
		for (const pr of products) {
			productObject[pr.name] &#x3D; pr
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			createdAt: Date
			sellingDate: Date
			supplier: { phone: string; name: string }
			admin: { phone: string; name: string }
			payment: { totalPay: number; card: number; cash: number; other: number; transfer: number; description: string; createdAt: Date }
			incomingProducts: { cost: number; count: number; selling_price: number; createdAt: Date; product: { name: string; count: number } }[]
		}&gt;(&#x27;/incomingOrder&#x27;)

		const arrivals &#x3D; []
		for (const arrival of data) {
			const stkey &#x3D; &#x60;${arrival.admin?.name.trim()}-${arrival.admin?.phone.trim()}&#x60;
			const staff &#x3D; staffObject[stkey] ? staffObject[stkey] : { id: staffs[0].id }
			const clkey &#x3D; &#x60;${arrival.supplier.name.trim()}-${arrival.supplier.phone.trim()}&#x60;
			let supplier &#x3D; supplierObject[clkey] ? supplierObject[clkey] : { id: null }
			if (!supplier.id) {
				supplier &#x3D; await this.prisma.userModel.findFirst({ where: { fullname: arrival.supplier.name.trim(), phone: arrival.supplier.phone.trim(), type: &#x27;supplier&#x27; } })
				if (!supplier) {
					supplier &#x3D; await this.prisma.userModel.create({
						data: { fullname: arrival.supplier.name.trim(), phone: arrival.supplier.phone.trim(), type: &#x27;supplier&#x27;, password: arrival.supplier.phone.trim() },
					})
				}
			}
			const products: {
				cost: number
				price: number
				totalPrice: number
				totalCost: number
				count: number
				createdAt: Date
				productId: string
			}[] &#x3D; []
			let totalCost &#x3D; 0
			let totalPrice &#x3D; 0
			for (const pro of arrival.incomingProducts) {
				const pkey &#x3D; pro.product.name.trim()
				let product &#x3D; productObject[pkey] ? productObject[pkey] : { id: null }
				if (!product.id) {
					product &#x3D; await this.prisma.productModel.findFirst({ where: { name: pkey } })
					if (!product) {
						product &#x3D; await this.prisma.productModel.create({ data: { name: pkey, count: pro.product.count ?? undefined } })
					}
				}
				const tprice &#x3D; (pro.count ?? 0) * (pro.selling_price ?? 0)
				const tcost &#x3D; (pro.count ?? 0) * (pro.cost ?? 0)
				totalCost &#x3D; totalCost + tcost
				totalPrice &#x3D; totalPrice + tprice
				products.push({
					cost: pro.cost,
					totalCost: tcost,
					totalPrice: tprice,
					count: pro.count,
					price: pro.selling_price,
					createdAt: pro.createdAt,
					productId: product.id,
				})
			}

			arrivals.push({
				supplierId: supplier.id,
				date: arrival.sellingDate,
				staffId: staff.id,
				totalCost: totalCost,
				totalPrice: totalPrice,
				payment: {
					create: {
						total: arrival.payment?.totalPay,
						card: arrival.payment?.card,
						cash: arrival.payment?.cash,
						other: arrival.payment?.other,
						transfer: arrival.payment?.transfer,
						description: arrival.payment?.description,
						createdAt: arrival.payment?.createdAt,
						type: ServiceTypeEnum.arrival,
						staffId: staff.id,
						userId: supplier.id,
					},
				},
				products: {
					createMany: {
						skipDuplicates: false,
						data: products.map((p) &#x3D;&gt; {
							return {
								productId: p.productId,
								type: ServiceTypeEnum.arrival,
								totalCost: p.totalCost,
								totalPrice: p.totalPrice,
								count: p.count,
								price: p.price,
								staffId: staff.id,
								createdAt: p.createdAt,
							}
						}),
					},
				},
			})
		}
		const chunkSize &#x3D; 100
		const addedArrivals &#x3D; []
		for (let i &#x3D; 0; i &lt; arrivals.length; i +&#x3D; chunkSize) {
			const chunk &#x3D; arrivals.slice(i, i + chunkSize)
			await Promise.all(chunk.map((arr) &#x3D;&gt; this.prisma.arrivalModel.create({ data: arr }).then(() &#x3D;&gt; addedArrivals.push(true))))
		}

		console.log(&#x27;arrivals&#x27;, data.length, addedArrivals.length)
	}

	async returning() {
		await this.prisma.returningModel.deleteMany({})

		const staffs &#x3D; await this.findAllStaffs()

		const staffObject: { [key: string]: { id: string } } &#x3D; {}
		for (const st of staffs) {
			staffObject[&#x60;${st.fullname}-${st.phone}&#x60;] &#x3D; st
		}

		const clients &#x3D; await this.findAllClients()

		const clientObject: { [key: string]: { id: string } } &#x3D; {}
		for (const cl of clients) {
			clientObject[&#x60;${cl.fullname}-${cl.phone}&#x60;] &#x3D; cl
		}

		const products &#x3D; await this.findAllProducts()

		const productObject: { [key: string]: { id: string } } &#x3D; {}
		for (const pr of products) {
			productObject[pr.name] &#x3D; pr
		}

		const data &#x3D; await this.fetchAllPages&lt;{
			sum: number
			cashPayment: number
			fromClient: number
			description: string
			accepted: boolean
			createdAt: Date
			returnedDate: Date
			client: { phone: string; name: string }
			seller: { phone: string; name: string }
			products: { count: number; price: number; createdAt: Date; product: { name: string; count: number } }[]
		}&gt;(&#x27;/returned-order&#x27;)

		const returnings &#x3D; []
		for (const returning of data) {
			const stkey &#x3D; &#x60;${returning.seller?.name.trim()}-${returning.seller?.phone.trim()}&#x60;
			const staff &#x3D; staffObject[stkey] ? staffObject[stkey] : { id: staffs[0].id }
			const clkey &#x3D; &#x60;${returning.client.name.trim()}-${returning.client.phone.trim()}&#x60;
			let client &#x3D; clientObject[clkey] ? clientObject[clkey] : { id: null }
			if (!client.id) {
				client &#x3D; await this.prisma.userModel.findFirst({ where: { fullname: returning.client.name.trim(), phone: returning.client.phone.trim(), type: &#x27;client&#x27; } })
				if (!client) {
					client &#x3D; await this.prisma.userModel.create({
						data: { fullname: returning.client.name.trim(), phone: returning.client.phone.trim(), type: &#x27;client&#x27;, password: returning.client.phone.trim() },
					})
				}
			}
			const products: { price: number; totalPrice: number; count: number; createdAt: Date; productId: string }[] &#x3D; []
			for (const pro of returning.products) {
				const pkey &#x3D; pro.product.name.trim()
				let product &#x3D; productObject[pkey] ? productObject[pkey] : { id: null }
				if (!product.id) {
					product &#x3D; await this.prisma.productModel.findFirst({ where: { name: pkey } })
					if (!product) {
						product &#x3D; await this.prisma.productModel.create({ data: { name: pkey, count: pro.product.count ?? undefined } })
					}
				}
				const tprice &#x3D; pro.count * pro.price
				products.push({ count: pro.count, totalPrice: tprice, price: pro.price, createdAt: pro.createdAt, productId: product.id })
			}

			returnings.push({
				clientId: client.id,
				date: returning.returnedDate,
				staffId: staff.id,
				totalPrice: returning.sum,
				payment: {
					create: {
						total: returning.sum,
						fromBalance: returning.fromClient,
						cash: returning.cashPayment,
						description: returning?.description,
						createdAt: returning?.createdAt,
						type: ServiceTypeEnum.returning,
						staffId: staff.id,
						userId: client.id,
					},
				},
				products: {
					createMany: {
						skipDuplicates: false,
						data: products.map((p) &#x3D;&gt; {
							return {
								productId: p.productId,
								type: ServiceTypeEnum.returning,
								count: p.count,
								totalPrice: p.totalPrice,
								price: p.price,
								staffId: staff.id,
								createdAt: p.createdAt,
							}
						}),
					},
				},
			})
		}
		const chunkSize &#x3D; 100
		const addedReturnings &#x3D; []
		for (let i &#x3D; 0; i &lt; returnings.length; i +&#x3D; chunkSize) {
			const chunk &#x3D; returnings.slice(i, i + chunkSize)
			await Promise.all(chunk.map((arr) &#x3D;&gt; this.prisma.returningModel.create({ data: arr }).then(() &#x3D;&gt; addedReturnings.push(true))))
		}

		console.log(&#x27;retunrings&#x27;, data.length, addedReturnings.length)
	}

	async syncronizeAll() {
		console.log(&#x27;synchronization started&#x27;)
		await this.prisma.arrivalModel.deleteMany({})
		await this.prisma.botUserModel.deleteMany({})
		await this.prisma.paymentModel.deleteMany({})
		await this.prisma.productModel.deleteMany({})
		await this.prisma.productMVModel.deleteMany({})
		await this.prisma.returningModel.deleteMany({})
		await this.prisma.sellingModel.deleteMany({})
		await this.prisma.userModel.deleteMany({})

		await this.staff()
		await this.supplier()
		await this.client()
		await this.product()
		await this.staffPayment()
		await this.supplierPayment()
		await this.clientPayment()
		await this.selling()
		await this.arrival()
		await this.returning()
		console.log(&#x27;syncronization finished&#x27;)

		return createResponse({ data: {}, success: { messages: [&#x27;syncronize success&#x27;] } })
	}

	async syncronize() {
		await this.signIn()
		return await this.syncronizeAll()
	}

	async findAllStaffs() {
		return this.prisma.userModel.findMany({ where: { type: UserTypeEnum.staff } })
	}

	async findAllSuppliers() {
		return this.prisma.userModel.findMany({ where: { type: UserTypeEnum.supplier } })
	}

	async findAllClients() {
		return this.prisma.userModel.findMany({ where: { type: UserTypeEnum.client } })
	}

	async findAllProducts() {
		return this.prisma.productModel.findMany({ where: {} })
	}
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'SyncronizeService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
